{"remainingRequest":"/Users/moge/dafei/study_project/Vue/saas/node_modules/thread-loader/dist/cjs.js!/Users/moge/dafei/study_project/Vue/saas/node_modules/babel-loader/lib/index.js!/Users/moge/dafei/study_project/Vue/saas/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/moge/dafei/study_project/Vue/saas/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/moge/dafei/study_project/Vue/saas/src/views/Login.vue","mtime":1552991649495},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/cache-loader/dist/cjs.js","mtime":1538991184695},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/cache-loader/dist/cjs.js","mtime":1538991184695},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport FORM from '@/utils/form';\nexport default {\n  name: 'login',\n  data: function data() {\n    return {\n      username: '',\n      btntext: '登录',\n      password: '',\n      loginCount: 0,\n      isloading: false\n    };\n  },\n  created: function created() {},\n  computed: {\n    isDisabled: function isDisabled() {\n      var checkmobile = FORM.checkmobile(this.username) == true,\n          checkpwd = FORM.checkpwd(this.password) == true;\n      return !(checkmobile && checkpwd);\n    }\n  },\n  methods: {\n    submit: function submit() {\n      if (FORM.checkmobile(this.username) != true) return;\n      if (this.password == '') return this.$message.error('请输入密码');\n      this.login();\n    },\n    login: function login() {\n      var _this = this;\n\n      if (this.loginCount > 3) return;\n      this.isloading = true;\n      var loading = this.$loading();\n      this.$store.dispatch('login/LOAD_LOGIN', {\n        user_name: this.username,\n        password: this.password\n      }).then(function (res) {\n        if (res.store_info && res.store_info.length) {\n          _this.$router.push({\n            name: 'main.container'\n          });\n        } else {\n          _this.$router.push({\n            name: 'apply'\n          });\n        }\n      }).catch(function (err) {\n        _this.checkLoginBtn();\n      }).finally(function () {\n        loading.close();\n        _this.isloading = false;\n      });\n    },\n    checkLoginBtn: function checkLoginBtn() {\n      var _this2 = this;\n\n      if (this.loginCount >= 3) {\n        this.$message.error('请10秒后再试~');\n        var time = 10;\n        var timer = setInterval(function () {\n          if (time <= 0) {\n            console.log(timer, 'timer');\n            clearInterval(timer);\n            _this2.loginCount = 0;\n            _this2.btntext = '登录';\n            return;\n          }\n\n          ;\n          _this2.btntext = '等待' + time + '秒后再试';\n          time--;\n        }, 1000);\n      }\n\n      this.loginCount++;\n    }\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,OAAA,IAAA,MAAA,cAAA;AACA,eAAA;AACA,QAAA,OADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,gBAAA,EADA;AAEA,eAAA,IAFA;AAGA,gBAAA,EAHA;AAIA,kBAAA,CAJA;AAKA,iBAAA;AALA,KAAA;AAOA,GAVA;AAWA,SAXA,qBAWA,CACA,CAZA;AAaA,YAAA;AACA,cADA,wBACA;AACA,UAAA,cAAA,KAAA,WAAA,CAAA,KAAA,QAAA,KAAA,IAAA;AAAA,UACA,WAAA,KAAA,QAAA,CAAA,KAAA,QAAA,KAAA,IADA;AAEA,aAAA,EAAA,eAAA,QAAA,CAAA;AACA;AALA,GAbA;AAoBA,WAAA;AACA,UADA,oBACA;AACA,UAAA,KAAA,WAAA,CAAA,KAAA,QAAA,KAAA,IAAA,EAAA;AACA,UAAA,KAAA,QAAA,IAAA,EAAA,EAAA,OAAA,KAAA,QAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AACA,WAAA,KAAA;AACA,KALA;AAMA,SANA,mBAMA;AAAA;;AACA,UAAA,KAAA,UAAA,GAAA,CAAA,EAAA;AACA,WAAA,SAAA,GAAA,IAAA;AACA,UAAA,UAAA,KAAA,QAAA,EAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,kBAAA,EAAA;AAAA,mBAAA,KAAA,QAAA;AAAA,kBAAA,KAAA;AAAA,OAAA,EAAA,IAAA,CAAA,eAAA;AACA,YAAA,IAAA,UAAA,IAAA,IAAA,UAAA,CAAA,MAAA,EAAA;AACA,gBAAA,OAAA,CAAA,IAAA,CAAA;AAAA,kBAAA;AAAA,WAAA;AACA,SAFA,MAEA;AACA,gBAAA,OAAA,CAAA,IAAA,CAAA;AAAA,kBAAA;AAAA,WAAA;AACA;AACA,OANA,EAMA,KANA,CAMA,eAAA;AACA,cAAA,aAAA;AACA,OARA,EAQA,OARA,CAQA,YAAA;AACA,gBAAA,KAAA;AACA,cAAA,SAAA,GAAA,KAAA;AACA,OAXA;AAYA,KAtBA;AAuBA,iBAvBA,2BAuBA;AAAA;;AACA,UAAA,KAAA,UAAA,IAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,UAAA;AACA,YAAA,OAAA,EAAA;AACA,YAAA,QAAA,YAAA,YAAA;AACA,cAAA,QAAA,CAAA,EAAA;AACA,oBAAA,GAAA,CAAA,KAAA,EAAA,OAAA;AACA,0BAAA,KAAA;AACA,mBAAA,UAAA,GAAA,CAAA;AACA,mBAAA,OAAA,GAAA,IAAA;AACA;AACA;;AAAA;AACA,iBAAA,OAAA,GAAA,OAAA,IAAA,GAAA,MAAA;AACA;AACA,SAVA,EAUA,IAVA,CAAA;AAWA;;AACA,WAAA,UAAA;AACA;AAxCA;AApBA,CAAA","sourcesContent":["<template>\n  <div id=\"login\">\n    <el-row :gutter=\"20\">\n      <el-col :span=\"16\" :offset=\"4\"><div class=\"grid-content f-13\">账号登录</div></el-col>\n    </el-row>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"16\" :offset=\"4\">\n        <div class=\"grid-content\">\n          <el-input\n            placeholder=\"请输入账号\"\n            prefix-icon=\"el-icon-vue-zhanghao\"\n            v-model.number=\"username\">\n          </el-input>\n        </div>\n      </el-col>\n    </el-row>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"16\" :offset=\"4\">\n        <div class=\"grid-content\">\n          <el-input\n            type=\"password\"\n            placeholder=\"请输入密码\"\n            prefix-icon=\"el-icon-vue-mima\"\n            v-model=\"password\">\n          </el-input>\n        </div>\n      </el-col>\n    </el-row>\n    <el-row :gutter=\"20\" >\n      <el-col :span=\"16\" :offset=\"4\">\n        <div class=\"grid-content\">\n          <el-button type=\"primary\" :disabled=\"isDisabled\" :loading=\"isloading\" @click=\"submit\">{{btntext}}</el-button>\n        </div>\n      </el-col>\n    </el-row>\n    <el-row :gutter=\"20\" >\n      <el-col :span=\"20\" :offset=\"7\">\n        <div class=\"nav-login-main f-7\">\n            <span>没有账号?</span>\n            <span class=\"btn-login\"  @click=\"$router.push({name: 'register'})\">注册</span>\n        </div>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport FORM from '@/utils/form'\nexport default {\n  name: 'login',\n  data () {\n    return {\n      username: '',\n      btntext:'登录',\n      password: '',\n      loginCount:0,\n      isloading: false\n    }\n  },\n  created () {\n  },\n  computed:{\n    isDisabled () {\n      let checkmobile = FORM.checkmobile(this.username)==true,\n          checkpwd = FORM.checkpwd(this.password)==true;\n      return !(checkmobile && checkpwd);\n    }\n  },\n  methods: {\n    submit () {\n      if (FORM.checkmobile(this.username)!=true)return;\n      if (this.password=='') return this.$message.error('请输入密码');\n      this.login();\n    },\n    login () {\n      if (this.loginCount>3)return;\n      this.isloading = true;\n      let loading = this.$loading();\n      this.$store.dispatch('login/LOAD_LOGIN',{user_name:this.username,password:this.password}).then(res=>{\n        if (res.store_info && res.store_info.length) {\n          this.$router.push({name: 'main.container'})\n        } else {\n          this.$router.push({name: 'apply'})\n        }\n      }).catch(err=>{\n        this.checkLoginBtn();\n      }).finally(()=>{\n        loading.close();\n        this.isloading = false;\n      })\n    },\n    checkLoginBtn () {\n      if (this.loginCount>=3) {\n        this.$message.error('请10秒后再试~');\n        let time = 10;\n        let timer = setInterval(()=>{\n          if (time <=0){\n            console.log(timer,'timer')\n            clearInterval(timer)\n            this.loginCount = 0;\n            this.btntext = '登录';\n            return;\n          };\n          this.btntext = '等待'+time+'秒后再试';\n          time--;\n        },1000)\n      }\n      this.loginCount++;\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n  #login{\n    width: 500px;\n    height: 300px;\n    margin:15% auto;\n    .nav-login-main{\n      right: 20px;\n      top:20px;\n      .btn-login{\n        color: #409EFF;\n        padding-left: 10px;\n        cursor: pointer;\n      }\n    }\n    .el-row {\n        margin-bottom: 20px;\n        &:last-child {\n          margin-bottom: 0;\n        }\n        .el-col {\n          .el-input{\n            border-radius: 0;\n          }\n          .el-button{\n            width: 100%;\n          }\n        }\n     }\n  }\n</style>\n"],"sourceRoot":"src/views"}]}