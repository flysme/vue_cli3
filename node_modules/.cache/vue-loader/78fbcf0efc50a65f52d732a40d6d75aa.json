{"remainingRequest":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/moge/dafei/study_project/Vue/saas/src/components/map.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/moge/dafei/study_project/Vue/saas/src/components/map.vue","mtime":1548923037835},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/cache-loader/dist/cjs.js","mtime":1538991184695},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.amap-wrapper {\n  width: 100%;\n  height: 250px;\n  position: relative;\n}\n.search-box{\n  width: 60%!important;\n  margin: 10px;\n  position: absolute!important;\n}\n.dialog-footer{\n  margin:0 30%;\n  .el-button{\n    flex:1;\n    border-radius: 0;\n    margin-left: 10px;\n  }\n}\n",{"version":3,"sources":["map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"map.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"searchmap\">\n    <el-dialog\n    title=\"请选择地点\"\n    :visible.sync=\"dialogVisible\"\n    @close=\"closeDialog\"\n    width=\"50%\">\n    <div class=\"demo-input-suffix sys-flex\">\n    </div>\n    <div class=\"amap-wrapper\">\n      <el-amap-search-box class=\"search-box abs\" :search-option=\"searchOption\" :on-search-result=\"onSearchResult\"></el-amap-search-box>\n      <el-amap vid=\"amapDemo\" :center=\"mapCenter\" :plugin=\"plugin\" :zoom=\"12\" class=\"amap-demo\">\n        <el-amap-marker v-if=\"markers.length\"  v-for=\"marker in markers\" :position=\"marker\" ></el-amap-marker>\n      </el-amap>\n    </div>\n    <span slot=\"footer\" class=\"dialog-footer sys-flex\">\n      <el-button @click=\"closeDialog\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"closeDialog\">确 定</el-button>\n    </span>\n  </el-dialog>\n  </div>\n</template>\n<script>\nexport default {\n  name: 'searchmap',\n  data() {\n      return {\n        markers: [],\n         mapCenter: [121.59996, 31.197646],\n         plugin: [{\n           pName: 'Geolocation',\n           events: {\n             init:(o)=> {\n               // o 是高德地图定位插件实例\n               o.getCurrentPosition((status, result) => {\n                 if (result && result.position) {\n                   console.log(result);\n                   this.lng = result.position.lng;\n                   this.lat = result.position.lat;\n                   this.mapCenter = [result.position.lng, result.position.lat];\n                   this.$nextTick();\n                 }\n               });\n             }\n           }\n         }],\n         searchOption: {\n           city: '铜陵市',\n           citylimit: true\n         },\n        dialogVisible: true,\n        markerlocation:{},\n      };\n  },\n  created () {\n    this.dialogVisible = true;\n    this.searchOption.city = this.city;\n    console.log(this.searchOption.city,'this.searchOption.city')\n  },\n  props:{\n    city:{\n      type:String,\n      default:'铜陵市'\n    }\n  },\n  methods: {\n    closeDialog () {\n      this.$emit('closeDialog',this.markerlocation);\n    },\n    onSearchResult(pois) {\n        // let latSum = 0;\n        // let lngSum = 0;\n        if (pois.length > 0) {\n          // pois.forEach(poi => {\n          //   let {lng, lat} = poi;\n          //   lngSum += lng;\n          //   latSum += lat;\n          // });\n          this.markers.push([pois[0].lng, pois[0].lat]);\n          // let center = {\n          //   lng: lngSum / pois.length,\n          //   lat: latSum / pois.length\n          // };\n          this.mapCenter = [pois[0].lng, pois[0].lat];\n          this.markerlocation = pois[0];\n          console.log(this.markerlocation,'this.markerlocation')\n        }\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n    .amap-wrapper {\n      width: 100%;\n      height: 250px;\n      position: relative;\n    }\n    .search-box{\n      width: 60%!important;\n      margin: 10px;\n      position: absolute!important;\n    }\n    .dialog-footer{\n      margin:0 30%;\n      .el-button{\n        flex:1;\n        border-radius: 0;\n        margin-left: 10px;\n      }\n    }\n</style>\n"]}]}