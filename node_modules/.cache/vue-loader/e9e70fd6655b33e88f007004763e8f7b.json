{"remainingRequest":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/moge/dafei/study_project/Vue/saas/src/views/Login.vue?vue&type=style&index=0&id=1383b805&lang=scss&scoped=true&","dependencies":[{"path":"/Users/moge/dafei/study_project/Vue/saas/src/views/Login.vue","mtime":1552991503192},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/cache-loader/dist/cjs.js","mtime":1538991184695},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#login{\n  width: 500px;\n  height: 300px;\n  margin:15% auto;\n  .nav-login-main{\n    right: 20px;\n    top:20px;\n    .btn-login{\n      color: #409EFF;\n      padding-left: 10px;\n      cursor: pointer;\n    }\n  }\n  .el-row {\n      margin-bottom: 20px;\n      &:last-child {\n        margin-bottom: 0;\n      }\n      .el-col {\n        .el-input{\n          border-radius: 0;\n        }\n        .el-button{\n          width: 100%;\n        }\n      }\n   }\n}\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"login\">\n    <el-row :gutter=\"20\">\n      <el-col :span=\"16\" :offset=\"4\"><div class=\"grid-content f-13\">账号登录</div></el-col>\n    </el-row>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"16\" :offset=\"4\">\n        <div class=\"grid-content\">\n          <el-input\n            placeholder=\"请输入账号\"\n            prefix-icon=\"el-icon-vue-zhanghao\"\n            v-model.number=\"username\">\n          </el-input>\n        </div>\n      </el-col>\n    </el-row>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"16\" :offset=\"4\">\n        <div class=\"grid-content\">\n          <el-input\n            type=\"password\"\n            placeholder=\"请输入密码\"\n            prefix-icon=\"el-icon-vue-mima\"\n            v-model=\"password\">\n          </el-input>\n        </div>\n      </el-col>\n    </el-row>\n    <el-row :gutter=\"20\" >\n      <el-col :span=\"16\" :offset=\"4\">\n        <div class=\"grid-content\">\n          <el-button type=\"primary\" :disabled=\"isDisabled\" :loading=\"isloading\" @click=\"submit\" @keyup.13=\"submit\">{{btntext}}</el-button>\n        </div>\n      </el-col>\n    </el-row>\n    <el-row :gutter=\"20\" >\n      <el-col :span=\"20\" :offset=\"7\">\n        <div class=\"nav-login-main f-7\">\n            <span>没有账号?</span>\n            <span class=\"btn-login\"  @click=\"$router.push({name: 'register'})\">注册</span>\n        </div>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport FORM from '@/utils/form'\nexport default {\n  name: 'login',\n  data () {\n    return {\n      username: '',\n      btntext:'登录',\n      password: '',\n      loginCount:0,\n      isloading: false\n    }\n  },\n  created () {\n  },\n  computed:{\n    isDisabled () {\n      let checkmobile = FORM.checkmobile(this.username)==true,\n          checkpwd = FORM.checkpwd(this.password)==true;\n      return !(checkmobile && checkpwd);\n    }\n  },\n  methods: {\n    submit () {\n      if (FORM.checkmobile(this.username)!=true)return;\n      if (this.password=='') return this.$message.error('请输入密码');\n      this.login();\n    },\n    login () {\n      if (this.loginCount>3)return;\n      this.isloading = true;\n      let loading = this.$loading();\n      this.$store.dispatch('login/LOAD_LOGIN',{user_name:this.username,password:this.password}).then(res=>{\n        if (res.store_info && res.store_info.length) {\n          this.$router.push({name: 'main.container'})\n        } else {\n          this.$router.push({name: 'apply'})\n        }\n      }).catch(err=>{\n        this.checkLoginBtn();\n      }).finally(()=>{\n        loading.close();\n        this.isloading = false;\n      })\n    },\n    checkLoginBtn () {\n      if (this.loginCount>=3) {\n        this.$message.error('请10秒后再试~');\n        let time = 10;\n        let timer = setInterval(()=>{\n          if (time <=0){\n            console.log(timer,'timer')\n            clearInterval(timer)\n            this.loginCount = 0;\n            this.btntext = '登录';\n            return;\n          };\n          this.btntext = '等待'+time+'秒后再试';\n          time--;\n        },1000)\n      }\n      this.loginCount++;\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n  #login{\n    width: 500px;\n    height: 300px;\n    margin:15% auto;\n    .nav-login-main{\n      right: 20px;\n      top:20px;\n      .btn-login{\n        color: #409EFF;\n        padding-left: 10px;\n        cursor: pointer;\n      }\n    }\n    .el-row {\n        margin-bottom: 20px;\n        &:last-child {\n          margin-bottom: 0;\n        }\n        .el-col {\n          .el-input{\n            border-radius: 0;\n          }\n          .el-button{\n            width: 100%;\n          }\n        }\n     }\n  }\n</style>\n"]}]}