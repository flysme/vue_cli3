{"remainingRequest":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/moge/dafei/study_project/Vue/saas/src/views/Containers/goods/goodsCats.vue?vue&type=style&index=0&id=29ad30d2&lang=scss&scoped=true&","dependencies":[{"path":"/Users/moge/dafei/study_project/Vue/saas/src/views/Containers/goods/goodsCats.vue","mtime":1548901366806},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/cache-loader/dist/cjs.js","mtime":1538991184695},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#goodscats{\n  background-color: #FFF;\n  padding:10px;\n  .btn-add{\n    margin:10px 0 0 0;\n    padding-bottom: 20px;\n    border-bottom: 1px solid #efefef;\n  }\n  .el-col{\n    margin:10px;\n  }\n  .dialog-footer{\n    width: 100%;\n    text-align: center;\n    .el-button{\n      width: 90%;\n    }\n  }\n}\n",{"version":3,"sources":["goodsCats.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"goodsCats.vue","sourceRoot":"src/views/Containers/goods","sourcesContent":["<template>\n  <div id=\"goodscats\">\n    <el-row>\n      <el-col :span=\"24\">\n         <div class=\"btn-add sys-flex\">\n           <el-button size=\"small\" type=\"primary\" :disabled=\"!storeStatus.canhandle\" @click=\"addcats\">新增分类</el-button>\n         </div>\n      </el-col>\n    </el-row>\n    <el-table\n      :data=\"categorysList\"\n      ref=\"multipleTable\"\n      tooltip-effect=\"dark\"\n      @selection-change=\"selectAllcatesGorys\"\n      v-loading=\"loading\"\n      style=\"width: 100%\">\n      <el-table-column\n        type=\"selection\"\n        width=\"33\">\n      </el-table-column>\n      <el-table-column\n        prop=\"category_name\"\n        fixed=\"left\"\n        label=\"分类名称\"\n        width=\"200px\">\n      </el-table-column>\n      <el-table-column\n        prop=\"create_time\"\n        fixed=\"left\"\n        label=\"创建时间\"\n        width=\"200px\">\n      </el-table-column>\n      <el-table-column\n        prop=\"upts_time\"\n        fixed=\"left\"\n        label=\"更新时间\"\n        width=\"200px\">\n      </el-table-column>\n      <el-table-column\n        fixed=\"left\"\n        label=\"操作\"\n        width=\"500\">\n        <template slot-scope=\"scope\">\n          <el-button @click=\"editCatesgorys(scope.row.category_id)\" type=\"text\" size=\"small\">编辑</el-button>\n          <el-button @click=\"deleteCatesgorys(scope.row.category_id)\" type=\"text\" size=\"small\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-row>\n      <el-col :span=\"2\">\n            <el-button size=\"mini\" :disabled=\"disabled\" @click=\"deletegoodCates\">删除</el-button>\n      </el-col>\n    </el-row>\n    <el-dialog title=\"新增分类\" width=\"40%\" :visible.sync=\"dialogVisible\">\n      <el-form :model=\"form\">\n        <el-form-item label=\"名称:\" :label-width=\"formLabelWidth\">\n          <el-input placeholder=\"请输入分类名称\" v-model=\"form.name\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submit\">确定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport UTILS from '@/utils/utils'\nimport { mapState } from 'vuex'\nexport default {\n  name: 'goodscats',\n  data () {\n    return {\n      userinfo:UTILS.storage.get('userinfo'),\n      multipleSelection:[],\n      disabled: true,\n      loading:true,\n      dialogVisible:false,\n      form: {\n        name: ''\n      },\n      formLabelWidth: '60px'\n    }\n  },\n  computed: {\n    ...mapState('product_category',{\n        categorysList: state => state.categorysList\n    }),\n    ...mapState('login',{\n        storeStatus:state => state.storeStatus,\n    })\n  },\n  created () {\n    this.getCategorys();\n  },\n  methods: {\n    /*列表全选分类*/\n    selectAllcatesGorys(val) {\n      this.multipleSelection = val;\n      this.disabled = this.multipleSelection.length ? false : true\n    },\n    /*获取分类列表*/\n    getCategorys () {\n      let data = {\n        store_id:this.userinfo.store_id || this.userinfo.store_info[0]['_id']\n      }\n      this.loading = true;\n      this.$store.dispatch('product_category/GET_CATEGORYS',data).then(()=>{\n        this.loading = false;\n      }).catch(e=>{\n        this.loading = false;\n        console.error(e);\n      })\n    },\n    /*分类名称更改*/\n    editCatesgorys (catesgory_id) {\n      this.$prompt('请输入新的分类名称', '修改分类', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n      }).then(({ value }) => {\n        let data = {\n          cats_name: value,\n          catesgory_id\n        }\n        this.$store.dispatch('product_category/UPDATE_CATEGORYS',data).then(()=>{\n          this.getCategorys();\n        })\n      }).catch((e) => {\n        console.error(e);\n      });\n    },\n    /*打开分类modal*/\n    addcats () {\n      this.dialogVisible = true;\n    },\n    /*新增分类*/\n    submit () {\n      if (this.form.name==''){\n        return this.$message.error('请输入分类名称');\n      }\n      console.log(this.form.name,'this.form.name')\n      let data = {\n        cats_name: this.form.name,\n        store_id:this.userinfo.store_id || this.userinfo.store_info[0]['_id']\n      }\n      this.dialogVisible = false;\n      this.$store.dispatch('product_category/SET_CATEGORYS',data).then(()=>{\n        this.getCategorys();\n      })\n    },\n    /*删除分类*/\n    deleteCatesgorys (catesgory_id) {\n      this.$confirm('确认删除该分类?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$store.dispatch('product_category/DELETE_CATEGORYS',catesgory_id).then(()=>{\n          this.getCategorys();\n        })\n      }).catch(() => {\n        console.log('取消')\n     });\n    },\n    /*删除选中分类*/\n    deletegoodCates () {\n\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n  #goodscats{\n    background-color: #FFF;\n    padding:10px;\n    .btn-add{\n      margin:10px 0 0 0;\n      padding-bottom: 20px;\n      border-bottom: 1px solid #efefef;\n    }\n    .el-col{\n      margin:10px;\n    }\n    .dialog-footer{\n      width: 100%;\n      text-align: center;\n      .el-button{\n        width: 90%;\n      }\n    }\n  }\n</style>\n"]}]}