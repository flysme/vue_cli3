{"remainingRequest":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/moge/dafei/study_project/Vue/saas/src/views/Containers/switchstore.vue?vue&type=style&index=0&id=4179ee6a&lang=scss&scoped=true&","dependencies":[{"path":"/Users/moge/dafei/study_project/Vue/saas/src/views/Containers/switchstore.vue","mtime":1551925253275},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/cache-loader/dist/cjs.js","mtime":1538991184695},{"path":"/Users/moge/dafei/study_project/Vue/saas/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.main-box{\n  text-align: left;\n  .btn-navback{\n    margin:30px 0 0 130px;\n  }\n  .switchStore{\n    width: 80%;\n    border:1px solid #efefef;\n    margin:100px auto;\n    box-shadow: 0 0  1px #efefef;\n    min-height: 400px;\n    padding:0 20px 20px 20px;\n    .store-list{\n      width: 100%;\n      flex-wrap: wrap;\n      .store-item{\n        width:25%;\n        height: 80px;\n        border:1px solid #efefef;\n        padding:10px;\n        align-items: center;\n        cursor: pointer;\n        margin:5px;\n        .store-icon{\n          width: 40px;\n          height: 40px;\n          line-height: 43px;\n          border-radius: 40px;\n          border:1px solid #efefef;\n          text-align: center;\n          margin-right: 10px;\n        }\n        .store-name{\n          font-weight: 500;\n          width: 65%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          word-break: break-all;\n          white-space: nowrap;\n        }\n        &:last-child{\n          margin-right: 0;\n        }\n        .select-icon{\n          bottom: 0;\n          right: 0;\n          bottom: -6px;\n          right: -11px;\n          color: #409EFF;\n          font-size: 24px!important;\n        }\n      }\n      .active{\n        border-color: #409EFF;\n      }\n    }\n    .create-new-store{\n      height: 50px;\n      justify-content: space-between;\n      align-items: center;\n      border-bottom: 1px solid #efefef;\n      margin-bottom: 20px;\n      .header-title{\n        font-weight: 500;\n      }\n      .el-button{\n        border-radius: 0;\n      }\n    }\n    .dialog-footer{\n      width: 100%;\n      left: 0;\n      bottom: 20px;\n      margin:0;\n      justify-content: center;\n      .el-button{\n        width: 20%!important;\n        flex:0;\n        border-radius: 0;\n      }\n    }\n  }\n}\n\n",{"version":3,"sources":["switchstore.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"switchstore.vue","sourceRoot":"src/views/Containers","sourcesContent":["<template>\n    <div class=\"main-box\">\n      <div class=\"btn-navback\">\n          <el-button @click=\"toNavback\" type=\"primary\" size=\"mini\">返回首页</el-button>\n      </div>\n      <div class=\"switchStore rel\">\n          <div class=\"create-new-store sys-flex\">\n              <div class=\"header-title\">选择店铺</div>\n              <el-button @click=\"createStore\" type=\"primary\" size=\"mini\">创建店铺</el-button>\n          </div>\n          <div class=\"sys-flex store-list\">\n              <div :class=\"['store-item','sys-flex','rel',item.active ?'active':'']\" @click=\"changeStore(item._id)\" v-for=\"(item,index) in storeInfo\" :key=\"index\">\n                  <div class=\"store-icon\">\n                    <!-- <img :src=\"item.src\" alt=\"\"> -->\n                    <i class=\"el-icon-vue-dian\"></i>\n                  </div>\n                  <div class=\"store-name\">{{item.name}}</div>\n                  <i v-if=\"item.active\" class=\"el-icon-vue-xuanzhongjiaobiao abs select-icon\"></i>\n              </div>\n          </div>\n          <div  class=\"dialog-footer sys-flex abs\">\n            <el-button size=\"medium\" @click=\"colseDialog\">取 消</el-button>\n            <el-button size=\"medium\" :disabled=\"isDisabled\" type=\"primary\" @click=\"saveStoreInfo\">确 定</el-button>\n          </div>\n      </div>\n    </div>\n</template>\n<script>\nimport UTILS from '@/utils/utils'\nimport config from '@/config/config'\nexport default {\n  name: 'switchStore',\n  data () {\n    return {\n      storeInfo:[],\n      userInfo:UTILS.storage.get('userinfo'),\n      switch_id:''\n    }\n  },\n  props: {\n    dialogVisible: {\n      type:Boolean,\n      default:false\n    }\n  },\n  created () {\n    this.getstoreInfo();\n  },\n  computed :{\n    /*是否禁用提交*/\n    isDisabled () {\n      return (this.userInfo&& this.userInfo.store_id || this.$store.state.login.userInfo&&this.$store.state.login.userInfo.store_id) == this.switch_id\n    }\n  },\n  methods:{\n    /*关闭dialog*/\n    colseDialog () {\n      this.$emit(\"colseDialog\");\n    },\n    /*新建店铺*/\n    createStore () {\n      this.$router.push({name:'apply'});\n    },\n    /*获取店铺信息*/\n    getstoreInfo () {\n      let userInfo = UTILS.storage.get('userinfo');\n      this.storeInfo = userInfo.store_info;\n      this.switch_id  = userInfo.store_id;\n      this.storeInfo && this.storeInfo.length && this.storeInfo.forEach(item=>{\n          item.active = false;\n          if (item._id == this.switch_id) {\n            item.active = true;\n          }\n      })\n      this.$store.dispatch('login/GET_STORE_INFO');\n    },\n    /*切换店铺*/\n    changeStore (store_id) {\n      this.switch_id = store_id;\n      let newstoreInfo = this.storeInfo.map(item=>{\n          item.active = item._id == store_id ? true :false;\n          return item;\n      })\n      this.storeInfo = newstoreInfo;\n    },\n    /*提交切换*/\n    saveStoreInfo () {\n      let data = {\n        store_id:this.switch_id\n      }\n      this.$store.dispatch('apply/SWITCHSTORE',data)\n      .then(()=>{\n        this.$message.success('店铺切换成功');\n        this.$router.push({name:'main.container.overview'});\n        this.colseDialog();\n      })\n      .catch(()=>{\n        this.$message.success('店铺切换失败');\n      });\n    },\n    toNavback () {\n      this.$router.go(-1);\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .main-box{\n    text-align: left;\n    .btn-navback{\n      margin:30px 0 0 130px;\n    }\n    .switchStore{\n      width: 80%;\n      border:1px solid #efefef;\n      margin:100px auto;\n      box-shadow: 0 0  1px #efefef;\n      min-height: 400px;\n      padding:0 20px 20px 20px;\n      .store-list{\n        width: 100%;\n        flex-wrap: wrap;\n        .store-item{\n          width:25%;\n          height: 80px;\n          border:1px solid #efefef;\n          padding:10px;\n          align-items: center;\n          cursor: pointer;\n          margin:5px;\n          .store-icon{\n            width: 40px;\n            height: 40px;\n            line-height: 43px;\n            border-radius: 40px;\n            border:1px solid #efefef;\n            text-align: center;\n            margin-right: 10px;\n          }\n          .store-name{\n            font-weight: 500;\n            width: 65%;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            word-break: break-all;\n            white-space: nowrap;\n          }\n          &:last-child{\n            margin-right: 0;\n          }\n          .select-icon{\n            bottom: 0;\n            right: 0;\n            bottom: -6px;\n            right: -11px;\n            color: #409EFF;\n            font-size: 24px!important;\n          }\n        }\n        .active{\n          border-color: #409EFF;\n        }\n      }\n      .create-new-store{\n        height: 50px;\n        justify-content: space-between;\n        align-items: center;\n        border-bottom: 1px solid #efefef;\n        margin-bottom: 20px;\n        .header-title{\n          font-weight: 500;\n        }\n        .el-button{\n          border-radius: 0;\n        }\n      }\n      .dialog-footer{\n        width: 100%;\n        left: 0;\n        bottom: 20px;\n        margin:0;\n        justify-content: center;\n        .el-button{\n          width: 20%!important;\n          flex:0;\n          border-radius: 0;\n        }\n      }\n    }\n  }\n\n</style>\n"]}]}