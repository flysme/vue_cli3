{"remainingRequest":"/Users/moge/dafei/study_project/Vue/test-cli3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/moge/dafei/study_project/Vue/test-cli3/src/views/Containers/goods/goodsList.vue?vue&type=style&index=0&id=33028ef6&lang=scss&scoped=true&","dependencies":[{"path":"/Users/moge/dafei/study_project/Vue/test-cli3/src/views/Containers/goods/goodsList.vue","mtime":1548833072543},{"path":"/Users/moge/dafei/study_project/Vue/test-cli3/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/test-cli3/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/test-cli3/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/moge/dafei/study_project/Vue/test-cli3/node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/moge/dafei/study_project/Vue/test-cli3/node_modules/cache-loader/dist/cjs.js","mtime":1538991184695},{"path":"/Users/moge/dafei/study_project/Vue/test-cli3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#goodList{\n  background-color: #FFF;\n  .search-main{\n    justify-content: space-between;\n    .search-btn{\n      margin-left: 20px;\n    }\n  }\n  .search-cats-main{\n    margin-left:40px;\n  }\n  .btn-add{\n    justify-content: flex-end;\n    margin-right: 10px;\n  }\n  .el-col{\n    margin:10px;\n  }\n}\n",{"version":3,"sources":["goodsList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"goodsList.vue","sourceRoot":"src/views/Containers/goods","sourcesContent":["<template>\n  <div id=\"goodList\">\n    <el-row type=\"flex\" justify=\"space-between\">\n      <el-col :span=\"9\">\n        <div class=\"sys-flex\">\n          <div class=\"grid-content search-main sys-flex\">\n            <el-input\n            size=\"small\"\n            v-model=\"searchvalue\"\n            placeholder=\"搜索\"\n            ></el-input>\n            <div class=\"search-btn\">\n              <el-button size=\"small\" type=\"primary\" plain @click=\"searchFilter\">筛选</el-button>\n            </div>\n          </div>\n          <div class=\"grid-content search-cats-main sys-flex\">\n            <el-select @change=\"selectCats\" v-model=\"catesgory_id\" placeholder=\"分类搜索\" size=\"small\">\n              <el-option :label=\"cateitem.category_name\" :value=\"cateitem.category_id\" :key=\"index\"  v-for=\"(cateitem,index) in categorysList\" ></el-option>\n            </el-select>\n          </div>\n        </div>\n      </el-col>\n      <el-col :span=\"3\">\n         <div class=\"btn-add sys-flex\">\n           <el-button size=\"small\" type=\"primary\"  @click=\"add\">新增商品</el-button>\n         </div>\n      </el-col>\n    </el-row>\n    <el-table\n      :data=\"resetResponData\"\n      ref=\"multipleTable\"\n      tooltip-effect=\"dark\"\n      @selection-change=\"selectAllItem\"\n      v-loading=\"loading\"\n      style=\"width: 100%\">\n      <el-table-column\n        type=\"selection\"\n        width=\"33\">\n      </el-table-column>\n      <el-table-column\n        prop=\"images\"\n        label=\"商品图\"\n        width=\"100\">\n        <template slot-scope=\"scope\">\n          <img :src=\"scope.row.image\" width=\"50\" height=\"50\"/>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"title\"\n        label=\"商品名称\"\n        width=\"180\">\n      </el-table-column>\n      <el-table-column\n        prop=\"ident_name\"\n        label=\"状态\">\n      </el-table-column>\n      <el-table-column\n        prop=\"num\"\n        label=\"库存\"\n        width=\"100\">\n      </el-table-column>\n      <el-table-column\n        prop=\"create_time\"\n        label=\"创建时间\">\n      </el-table-column>\n      <el-table-column\n        fixed=\"right\"\n        label=\"操作\"\n        width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-button @click=\"editGoods(scope.row)\" type=\"text\" size=\"small\">编辑</el-button>\n          <span> - </span>\n          <el-dropdown @command=\"setItemhandle\" trigger=\"click\" size=\"mini\">\n              <el-button  type=\"text\" size=\"small\">更多</el-button>\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item :command=\"scope.row\">{{scope.row.status=='1' ? '下架':'上架'}}</el-dropdown-item>\n              </el-dropdown-menu>\n          </el-dropdown>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-row>\n      <el-col :span=\"6\">\n            <el-button size=\"mini\" :disabled=\"disabled\" @click=\"changeProducts(1)\">上架</el-button>\n            <el-button size=\"mini\" :disabled=\"disabled\" @click=\"changeProducts(0)\">下架</el-button>\n            <el-button size=\"mini\" :disabled=\"disabled\" @click=\"changeProducts(2)\">删除</el-button>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport UTILS from '@/utils/utils'\nimport { mapState } from 'vuex'\nexport default {\n  name: 'goodList',\n  data () {\n    return {\n      loading:true,\n      multiProductList: [],\n      disabled: true,\n      searchcatsvalue:'',\n      catesgory_id:'',\n      searchvalue: '', //搜索关键字\n      userinfo:UTILS.storage.get('userinfo'),\n    }\n  },\n  computed: {\n    resetResponData () {\n      let goodList = this.$store.state.product.goodList;\n      let resetData = goodList.map(item => {\n         item.ident_name = item.status==1 ? '已上架' : '已下架'\n         return item;\n      })\n      return resetData\n    },\n    ...mapState('product_category',{\n        // 箭头函数可使代码更简练\n        categorysList: state => state.categorysList\n    })\n  },\n  created () {\n    this.getCategorys();\n    this.getProducts();\n  },\n  methods: {\n    toggleSelection(rows) {\n      if (rows) {\n        rows.forEach(row => {\n          this.$refs.multipleTable.toggleRowSelection(row);\n        });\n      } else {\n        this.$refs.multipleTable.clearSelection();\n      }\n    },\n    /*列表全选*/\n    selectAllItem(val) {\n      this.multiProductList = val;\n      this.disabled = this.multiProductList.length ? false : true\n    },\n    /*获取商品分类*/\n    getCategorys () {\n      let data = {\n        store_id:this.userinfo.store_id || this.userinfo.store_info[0]['_id']\n      }\n      this.$store.dispatch('product_category/GET_CATEGORYS',data)\n    },\n    /*分类搜索*/\n    selectCats () {\n      this.getProducts();\n    },\n    /*获取商品*/\n    getProducts () {\n      let data = {\n        store_id:this.userinfo.store_id || this.userinfo.store_info[0]['_id'],\n      }\n      if (this.searchvalue!='') {\n        data.product_name=this.searchvalue;\n      }\n      if (this.catesgory_id!='') {\n        data.catesgory_id=this.catesgory_id;\n      }\n      this.loading = true;\n      this.$store.dispatch('product/LOAD_GOODSLIST',data).then(()=>{\n        this.loading = false;\n      }).finally(()=>{\n        this.isloading = false;\n      })\n    },\n    editGoods (item) {\n      this.$router.push({path: `/editgoods/${item.product_id}`});\n    },\n    /*点击更多*/\n    setItemhandle(item) {\n      let status = item.status==1 ? 0: 1;\n      this.updateProductstatus([item.product_id],status);\n    },\n    /*商品全选操作*/\n    changeProducts (status) {\n      let product_ids = this.multiProductList.map(item=>(item.product_id));\n      this.updateProductstatus(product_ids,status);\n    },\n    /*更新商品状态*/\n    updateProductstatus (product_ids,status) {\n      let data = {status,product_ids};\n      this.$store.dispatch('product/UPDATE_GOODSITEM',data).then(()=>{\n        this.getProducts();\n      });\n    },\n    /*商品名称搜索*/\n    searchFilter () {\n      this.getProducts();\n    },\n    /*商品分类搜索*/\n    setcatsSearch (command) {\n      this.$message('click on item ' + command);\n    },\n    add () {\n      this.$router.push({name: 'main.container.goods.editgoods'});\n    }\n    // ...mapActions({\n    //   add: 'goodsList/LOAD_GOODSLIST'  /*新增商品*/\n    // })\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n  #goodList{\n    background-color: #FFF;\n    .search-main{\n      justify-content: space-between;\n      .search-btn{\n        margin-left: 20px;\n      }\n    }\n    .search-cats-main{\n      margin-left:40px;\n    }\n    .btn-add{\n      justify-content: flex-end;\n      margin-right: 10px;\n    }\n    .el-col{\n      margin:10px;\n    }\n  }\n</style>\n"]}]}